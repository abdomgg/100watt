<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!-- Salesperson: only own quotations/orders (optional, if you want strict) -->
  <record id="rule_sale_order_salesperson_own" model="ir.rule">
    <field name="name">Sales: Sale Orders - Own Only</field>
    <field name="model_id" ref="sale.model_sale_order"/>
    <field name="domain_force">[
      '|',
        ('user_id', '=', user.id),
        ('create_uid', '=', user.id)
    ]</field>
    <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
    <field name="global" eval="False"/>
  </record>

  <!-- Team Leader: own + team members (users whose sale_team leader = me) -->
  <record id="rule_sale_order_team_leader_team" model="ir.rule">
    <field name="name">Sales: Sale Orders - My Team</field>
    <field name="model_id" ref="sale.model_sale_order"/>
    <field name="domain_force">[
      '|','|',
        ('user_id', '=', user.id),
        ('user_id.sale_team_id.user_id', '=', user.id),
        ('create_uid', '=', user.id)
    ]</field>
    <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman_all_leads'))]"/>
    <field name="global" eval="False"/>
  </record>

  <!-- Admin: full access -->
  <record id="rule_sale_order_admin_all" model="ir.rule">
    <field name="name">Sales: Sale Orders - Admin All</field>
    <field name="model_id" ref="sale.model_sale_order"/>
    <field name="domain_force">[(1,'=',1)]</field>
    <field name="groups" eval="[(4, ref('base.group_system'))]"/>
    <field name="global" eval="False"/>
  </record>

</odoo>
